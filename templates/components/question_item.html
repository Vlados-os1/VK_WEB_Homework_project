{% load static %}
<div class="question-item {% if detailed %}detailed{% endif %}">
    <div class="question-header">
        <div class="question-voting">
            {% if question.id %}
            <form method="POST" action="{% url 'app:vote_question' question.id %}">
                {% csrf_token %}
                <input type="hidden" name="vote_type" value="{% if detailed %}up_a{% else %}up{% endif %}">
                <button type="submit" class="vote-btn vote-up">▲</button>
            </form>

            <span class="vote-count">{{ question.questionlike_set.count }}</span>

            <form method="POST" action="{% url 'app:vote_question' question.id %}">
                {% csrf_token %}
                <input type="hidden" name="vote_type" value="{% if detailed %}down_a{% else %}down{% endif %}">
                <button type="submit" class="vote-btn vote-down">▼</button>
            </form>
            {% endif %}
        </div>
        <img src="{% static 'img/Ask_avatar.png' %}" alt="User Avatar" class="question-avatar">
        <div class="question-info">
            {% if detailed %}
                <h1 class="question-title">{{ question.title }}</h1>
                <span class="question-author">by {{ question.author.username }}</span>
            {% else %}
                {% if question.id %}
                <a href="{% url 'app:question' question.id %}" class="question-title">{{ question.title }}</a>
                {% else %}
                <span class="question-title">{{ question.title }}</span>
                {% endif %}
            {% endif %}
        </div>
    </div>
    <div class="question-content">
        <p>{{ question.content }}</p>
    </div>
    <div class="question-meta">
        {% if not detailed %}
            {% if question.id %}
            <a href="{% url 'app:question' question.id %}" class="answers-count">answer ({{ question.answers.count }})</a>
            {% endif %}
        {% endif %}
        <div class="question-tags">
            <span class="tags-label">Tags:</span>
            {% for tag in question.tags.all %}
            <a href="{% url 'app:tag' tag.name %}" class="tag">{{ tag.name }}</a>
            {% endfor %}
        </div>
    </div>
</div>