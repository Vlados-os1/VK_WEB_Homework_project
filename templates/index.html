{% extends "base.html" %}
{% load static %}

{% block title %}Home - AskPupkin{% endblock %}

{% block content %}
<div class="questions-nav">
    <h2 class="nav-title">New Questions</h2>
    <a href="{% url 'app:hot' %}" class="nav-link">Hot Questions</a>
</div>

<div class="questions-list">
    {% for question in questions %}
    <div class="question-item">
        <div class="question-header">
            <div class="question-voting">
                <form method="POST" action="{% url 'app:vote_question' question.id %}">
                    {% csrf_token %}
                    <input type="hidden" name="vote_type" value="up">
                    <button type="submit" class="vote-btn vote-up">▲</button>
                </form>

                <span class="vote-count">{{ question.questionlike_set.count }}</span>

                <form method="POST" action="{% url 'app:vote_question' question.id %}">
                    {% csrf_token %}
                    <input type="hidden" name="vote_type" value="down">
                    <button type="submit" class="vote-btn vote-down">▼</button>
                </form>
            </div>
            <img src="{% static 'img/Ask_avatar.png' %}" alt="User Avatar" class="question-avatar">
            <div class="question-info">
                <a href="{% url 'app:question' question.id %}" class="question-title">{{ question.title }}</a>
            </div>
        </div>
        <div class="question-content">
            <p>{{ question.content }}</p>
        </div>
        <div class="question-meta">
            <a href="{% url 'app:question' question.id %}" class="answers-count">answer ({{ question.questions.count }})</a>
            <div class="question-tags">
                <span class="tags-label">Tags:</span>
                {% for tag in question.tags.all %}
                <a href="{% url 'app:tag' tag.name %}" class="tag">{{ tag.name }}</a>
                {% endfor %}
            </div>
        </div>
    </div>
    {% endfor %}
</div>

{% if page and page.paginator.num_pages > 1 %}
    {% include 'pagination.html' with page=page %}
{% endif %}

{% endblock %}